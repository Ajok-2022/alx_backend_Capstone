{% extends 'base.html' %}

{% block title %}My Registrations - EventHub{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb">
    <div class="breadcrumb-content">
        <a href="/events/">Browse Events</a>
        <span>/</span>
        <a href="/dashboard/">Dashboard</a>
        <span>/</span>
        <span>My Registrations</span>
    </div>
</div>
{% endblock %}

{% block content %}
<style>
    .page-header { text-align: center; margin-bottom: 2rem; }
    .page-title { color: #2c3e50; font-size: 2rem; margin-bottom: 0.5rem; }
    .page-subtitle { color: #666; }
    .registration-card { background: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.1); transition: all 0.3s; }
    .registration-card:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.15); }
    .event-title { font-size: 1.3rem; font-weight: bold; color: #2c3e50; margin-bottom: 0.5rem; }
    .event-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem; }
    .detail-item { color: #666; }
    .detail-label { font-weight: bold; color: #333; display: block; margin-bottom: 0.25rem; }
    .registration-info { background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
    .status-badge { padding: 6px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: bold; display: inline-block; }
    .status-upcoming { background: #d4edda; color: #155724; }
    .status-past { background: #e2e3e5; color: #383d41; }
    .actions { display: flex; gap: 1rem; justify-content: flex-end; flex-wrap: wrap; }
    .no-registrations { text-align: center; padding: 3rem; color: #666; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
</style>

<div class="page-header">
    <h1 class="page-title">ğŸ« My Event Registrations</h1>
    <p class="page-subtitle">Track and manage your event registrations</p>
</div>

{% for registration in registrations %}
    <div class="registration-card">
        <div class="event-title">{{ registration.event.title }}</div>
        
        <div class="event-details">
            <div class="detail-item">
                <span class="detail-label">ğŸ“… Date & Time</span>
                {{ registration.event.date_time|date:"M d, Y - H:i" }}
            </div>
            <div class="detail-item">
                <span class="detail-label">ğŸ“ Location</span>
                {{ registration.event.location }}
            </div>
            <div class="detail-item">
                <span class="detail-label">ğŸ‘¨ğŸ’¼ Organizer</span>
                {{ registration.event.organizer.username }}
            </div>
            <div class="detail-item">
                <span class="detail-label">ğŸ‘¥ Capacity</span>
                {{ registration.event.attendees.count }}/{{ registration.event.capacity }}
            </div>
        </div>

        <div class="registration-info">
            <strong>Registered on:</strong> {{ registration.registered_at|date:"M d, Y - H:i" }}
            {% if registration.event.is_upcoming %}
                <span class="status-badge status-upcoming">Upcoming Event</span>
            {% else %}
                <span class="status-badge status-past">Past Event</span>
            {% endif %}
        </div>

        <div class="actions">
            <a href="/events/{{ registration.event.id }}/" class="btn btn-primary btn-sm">View Event</a>
            {% if registration.event.is_upcoming %}
                <a href="/events/{{ registration.event.id }}/unregister/" class="btn btn-danger btn-sm"
                   onclick="return confirm('Are you sure you want to unregister from {{ registration.event.title }}?')">
                   Unregister
                </a>
            {% endif %}
        </div>
    </div>
{% empty %}
    <div class="no-registrations">
        <h3>ğŸ“­ No Event Registrations</h3>
        <p>You haven't registered for any events yet.</p>
        <a href="/events/" class="btn btn-primary" style="margin-top: 1rem;">Browse Events</a>
    </div>
{% endfor %}
{% endblock %}